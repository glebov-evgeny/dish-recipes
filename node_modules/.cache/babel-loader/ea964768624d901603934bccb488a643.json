{"ast":null,"code":"import _slicedToArray from\"/Users/evgeniy/Desktop/portfolio/dish-recipes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useHistory,useLocation}from\"react-router-dom\";import{useState,useEffect}from\"react\";import{getAllCategories}from\"../api\";import{Preloader}from\"../components/Preloader/Preloader\";import{CategoryList}from\"../components/Category/CategoryList\";import{Search}from\"../components/Search/Search\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),catalog=_useState2[0],setCatalog=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),filteredCatalog=_useState4[0],setFilteredCatalog=_useState4[1];var _useLocation=useLocation(),pathname=_useLocation.pathname,search=_useLocation.search;var _useHistory=useHistory(),push=_useHistory.push;var handleSearch=function handleSearch(str){setFilteredCatalog(catalog.filter(function(item){return item.strCategory.toLowerCase().includes(str.toLowerCase());}));push({pathname:pathname,search:\"?search=\".concat(str)});};useEffect(function(){getAllCategories().then(function(data){setCatalog(data.categories);setFilteredCatalog(search?data.categories.filter(function(item){return item.strCategory.toLowerCase().includes(search.split(\"=\")[1].toLowerCase());}):data.categories);});},[search]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Search,{cb:handleSearch}),!catalog.length?/*#__PURE__*/_jsx(Preloader,{}):/*#__PURE__*/_jsx(CategoryList,{catalog:filteredCatalog})]});}export{Home};","map":{"version":3,"sources":["/Users/evgeniy/Desktop/portfolio/dish-recipes/src/pages/Home.jsx"],"names":["useHistory","useLocation","useState","useEffect","getAllCategories","Preloader","CategoryList","Search","Home","catalog","setCatalog","filteredCatalog","setFilteredCatalog","pathname","search","push","handleSearch","str","filter","item","strCategory","toLowerCase","includes","then","data","categories","split","length"],"mappings":"oKAAA,OAASA,UAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,gBAAT,KAAiC,QAAjC,CACA,OAASC,SAAT,KAA0B,mCAA1B,CACA,OAASC,YAAT,KAA6B,qCAA7B,CACA,OAASC,MAAT,KAAuB,6BAAvB,C,6IAEA,QAASC,CAAAA,IAAT,EAAgB,CACd,cAA8BN,QAAQ,CAAC,EAAD,CAAtC,wCAAOO,OAAP,eAAgBC,UAAhB,eACA,eAA8CR,QAAQ,CAAC,EAAD,CAAtD,yCAAOS,eAAP,eAAwBC,kBAAxB,eAEA,iBAA6BX,WAAW,EAAxC,CAAQY,QAAR,cAAQA,QAAR,CAAkBC,MAAlB,cAAkBA,MAAlB,CACA,gBAAiBd,UAAU,EAA3B,CAAQe,IAAR,aAAQA,IAAR,CAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,GAAD,CAAS,CAC5BL,kBAAkB,CAChBH,OAAO,CAACS,MAAR,CAAe,SAACC,IAAD,QACbA,CAAAA,IAAI,CAACC,WAAL,CAAiBC,WAAjB,GAA+BC,QAA/B,CAAwCL,GAAG,CAACI,WAAJ,EAAxC,CADa,EAAf,CADgB,CAAlB,CAKAN,IAAI,CAAC,CACHF,QAAQ,CAARA,QADG,CAEHC,MAAM,mBAAaG,GAAb,CAFH,CAAD,CAAJ,CAID,CAVD,CAYAd,SAAS,CAAC,UAAM,CACdC,gBAAgB,GAAGmB,IAAnB,CAAwB,SAACC,IAAD,CAAU,CAChCd,UAAU,CAACc,IAAI,CAACC,UAAN,CAAV,CACAb,kBAAkB,CAAEE,MAAM,CACxBU,IAAI,CAACC,UAAL,CAAgBP,MAAhB,CAAuB,SAACC,IAAD,QACrBA,CAAAA,IAAI,CAACC,WAAL,CAAiBC,WAAjB,GAA+BC,QAA/B,CAAwCR,MAAM,CAACY,KAAP,CAAa,GAAb,EAAkB,CAAlB,EAAqBL,WAArB,EAAxC,CADqB,EAAvB,CADwB,CAGpBG,IAAI,CAACC,UAHO,CAAlB,CAKD,CAPD,EAQD,CATQ,CASN,CAACX,MAAD,CATM,CAAT,CAWA,mBACE,wCACE,KAAC,MAAD,EAAQ,EAAE,CAAEE,YAAZ,EADF,CAEG,CAACP,OAAO,CAACkB,MAAT,cACC,KAAC,SAAD,IADD,cAGC,KAAC,YAAD,EAAc,OAAO,CAAEhB,eAAvB,EALJ,GADF,CAUD,CACD,OAASH,IAAT","sourcesContent":["import { useHistory, useLocation } from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\nimport { getAllCategories } from \"../api\";\nimport { Preloader } from \"../components/Preloader/Preloader\";\nimport { CategoryList } from \"../components/Category/CategoryList\";\nimport { Search } from \"../components/Search/Search\";\n\nfunction Home() {\n  const [catalog, setCatalog] = useState([]);\n  const [filteredCatalog, setFilteredCatalog] = useState([]);\n\n  const { pathname, search } = useLocation();\n  const { push } = useHistory();\n\n  const handleSearch = (str) => {\n    setFilteredCatalog(\n      catalog.filter((item) =>\n        item.strCategory.toLowerCase().includes(str.toLowerCase())\n      )\n    );\n    push({\n      pathname,\n      search: `?search=${str}`,\n    });\n  };\n\n  useEffect(() => {\n    getAllCategories().then((data) => {\n      setCatalog(data.categories);\n      setFilteredCatalog( search ?\n        data.categories.filter((item) =>\n          item.strCategory.toLowerCase().includes(search.split(\"=\")[1].toLowerCase())\n        ) : data.categories\n      );\n    });\n  }, [search]);\n\n  return (\n    <>\n      <Search cb={handleSearch} />\n      {!catalog.length ? (\n        <Preloader />\n      ) : (\n        <CategoryList catalog={filteredCatalog} />\n      )}\n    </>\n  );\n}\nexport { Home };\n"]},"metadata":{},"sourceType":"module"}